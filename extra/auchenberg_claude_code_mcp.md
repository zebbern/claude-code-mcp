# Auchenberg's Claude Code MCP

## Overview
Auchenberg's Claude Code MCP is a comprehensive implementation of Claude Code as a Model Context Protocol (MCP) server. This project allows you to use Claude Code's powerful software engineering capabilities through a standardized MCP interface, enabling seamless integration with other AI tools and workflows. It was auto-generated by DevinAI after analyzing the Claude Code codebase to create a robust MCP server implementation.

## Installation

### Prerequisites
- Claude Code CLI installed and configured
- Node.js 16+ or Python 3.8+
- Claude Desktop application
- Valid Anthropic API key
- Understanding of MCP architecture

### Install Steps

#### Option 1: NPM Installation
```bash
npm install -g @auchenberg/claude-code-mcp
```

#### Option 2: Direct from GitHub
```bash
git clone https://github.com/auchenberg/claude-code-mcp.git
cd claude-code-mcp
npm install
npm run build
npm start
```

#### Option 3: Using Claude MCP CLI
```bash
claude mcp add auchenberg/claude-code-mcp
```

#### Option 4: Docker Container
```bash
docker run -d --name auchenberg-claude-code-mcp \
  -v $(pwd):/workspace \
  -p 3000:3000 \
  -e ANTHROPIC_API_KEY=your-api-key \
  auchenberg/claude-code-mcp
```

## Configuration

### Claude Desktop Configuration
```json
{
  "mcpServers": {
    "claude-code-mcp": {
      "command": "npx",
      "args": [
        "@auchenberg/claude-code-mcp"
      ],
      "env": {
        "ANTHROPIC_API_KEY": "your-anthropic-api-key",
        "CLAUDE_CODE_PATH": "/usr/local/bin/claude",
        "WORKSPACE_ROOT": "/path/to/workspace",
        "MCP_PORT": "3000"
      }
    }
  }
}
```

### Advanced Configuration
```json
{
  "mcpServers": {
    "claude-code-advanced": {
      "command": "node",
      "args": [
        "/path/to/claude-code-mcp/dist/server.js",
        "--config", "/path/to/mcp-config.json",
        "--port", "3000"
      ],
      "env": {
        "ANTHROPIC_API_KEY": "your-anthropic-api-key",
        "CLAUDE_CODE_PATH": "/usr/local/bin/claude",
        "WORKSPACE_ROOT": "/workspace",
        "LOG_LEVEL": "info",
        "MAX_CONCURRENT_REQUESTS": "5",
        "REQUEST_TIMEOUT": "300000"
      }
    }
  }
}
```

### MCP Configuration File (mcp-config.json)
```json
{
  "server": {
    "name": "claude-code-mcp",
    "version": "1.0.0",
    "port": 3000,
    "host": "localhost"
  },
  "claudeCode": {
    "executable": "/usr/local/bin/claude",
    "workspaceRoot": "/workspace",
    "defaultModel": "claude-3-5-sonnet-20241022",
    "maxTokens": 8192,
    "temperature": 0.1
  },
  "capabilities": {
    "tools": {
      "enabled": true,
      "maxConcurrent": 5
    },
    "resources": {
      "enabled": true,
      "caching": true
    },
    "prompts": {
      "enabled": false
    }
  },
  "security": {
    "allowedWorkspaces": ["/workspace", "/tmp"],
    "blockedCommands": ["rm -rf", "sudo", "su"],
    "sandboxMode": false,
    "rateLimiting": {
      "enabled": true,
      "maxRequestsPerMinute": 60
    }
  }
}
```

## Usage Examples

### Basic Claude Code Operations
```
# Code analysis and review
Analyze the current codebase and provide detailed feedback on code quality, structure, and potential improvements.

# Automated code generation
Generate complete modules, classes, or functions based on specifications and requirements.

# Bug detection and fixing
Identify bugs in the codebase and automatically generate fixes with explanations.

# Code refactoring
Refactor existing code to improve readability, performance, and maintainability.

# Documentation generation
Generate comprehensive documentation for existing code, including API docs and README files.
```

### Advanced Development Workflows
```
# Full-stack development
1. Analyze requirements and create project structure
2. Generate backend API endpoints with proper error handling
3. Create frontend components with responsive design
4. Implement database schemas and migrations
5. Add comprehensive testing suite
6. Generate deployment configurations

# Code migration and modernization
Migrate legacy codebases to modern frameworks and best practices.

# Performance optimization
Analyze code performance bottlenecks and implement optimizations.

# Security audit and hardening
Identify security vulnerabilities and implement fixes.

# API development and documentation
Create RESTful APIs with OpenAPI specifications and interactive documentation.
```

### Integration Patterns
```
# With development tools
Integrate with VS Code, Cursor, and other IDEs through MCP extensions.
Connect with CI/CD pipelines for automated code review and testing.
Use with project management tools for requirement tracking.

# With other MCP servers
Combine with filesystem MCP for enhanced file operations.
Integrate with Git MCP for version control workflows.
Use with database MCPs for data-driven development.
Connect with communication MCPs for team collaboration.

# For team collaboration
Set up shared Claude Code instances for team development.
Implement code review workflows with automated feedback.
Create standardized development processes and templates.
```

## Features

### Core Capabilities
- **Full Claude Code Integration**: Complete access to Claude Code's software engineering capabilities
- **MCP Protocol Compliance**: Fully compliant with MCP specification for seamless integration
- **Multi-Workspace Support**: Manage multiple projects and workspaces simultaneously
- **Real-Time Communication**: WebSocket-based real-time communication with clients
- **Comprehensive Logging**: Detailed logging of all operations and interactions

### Advanced Features
- **Intelligent Caching**: Cache Claude Code responses for improved performance
- **Batch Operations**: Execute multiple Claude Code commands in parallel
- **Template System**: Pre-built templates for common development patterns
- **Plugin Architecture**: Extensible plugin system for custom functionality
- **Monitoring Dashboard**: Web-based dashboard for monitoring server status

### Development Tools
- **Code Analysis**: Deep code analysis with suggestions for improvements
- **Automated Testing**: Generate and run comprehensive test suites
- **Documentation**: Automatic generation of code documentation
- **Refactoring**: Intelligent code refactoring with safety checks
- **Debugging**: Advanced debugging assistance and error analysis

### Enterprise Features
- **Role-Based Access**: Fine-grained access control for team environments
- **Audit Logging**: Comprehensive audit trails for compliance
- **Scalability**: Horizontal scaling support for large teams
- **Integration APIs**: RESTful APIs for external system integration
- **Custom Workflows**: Define and execute custom development workflows

## Requirements

### System Requirements
- **Operating System**: macOS 10.15+, Linux (Ubuntu 18.04+), Windows 10+ (with WSL2)
- **Node.js**: 16.0 or higher (18.0+ recommended)
- **Memory**: 8GB RAM minimum, 16GB+ recommended for large projects
- **Storage**: 5GB+ available space for caching and temporary files
- **Network**: Stable internet connection for Claude API access

### Claude Code Requirements
- Claude Code CLI version 1.0.0 or higher
- Valid Anthropic API key with sufficient credits
- Proper authentication and workspace setup
- Understanding of Claude Code capabilities and limitations

### Dependencies
```json
{
  "dependencies": {
    "@anthropic-ai/sdk": "^0.24.0",
    "@modelcontextprotocol/sdk": "^0.5.0",
    "express": "^4.18.0",
    "ws": "^8.14.0",
    "winston": "^3.10.0",
    "joi": "^17.9.0",
    "dotenv": "^16.3.0",
    "cors": "^2.8.5"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/express": "^4.17.0",
    "@types/ws": "^8.5.0",
    "typescript": "^5.0.0",
    "jest": "^29.0.0",
    "supertest": "^6.3.0",
    "eslint": "^8.0.0",
    "prettier": "^3.0.0"
  }
}
```

## Security Considerations

### Best Practices
- **API Key Management**: Secure storage and rotation of Anthropic API keys
- **Workspace Isolation**: Strict isolation between different workspaces and projects
- **Input Validation**: Comprehensive validation of all inputs and commands
- **Rate Limiting**: Implement rate limiting to prevent abuse
- **Audit Logging**: Complete audit trails for all operations

### Security Configuration
```json
{
  "security": {
    "authentication": {
      "enabled": true,
      "method": "api-key",
      "keyRotation": "90d"
    },
    "authorization": {
      "enabled": true,
      "rbac": true,
      "defaultRole": "developer"
    },
    "workspace": {
      "isolation": "strict",
      "allowedPaths": ["/workspace", "/tmp"],
      "blockedPaths": ["/etc", "/usr", "/bin", "/sbin"]
    },
    "commands": {
      "whitelist": ["git", "npm", "yarn", "python", "node", "pip"],
      "blacklist": ["rm -rf", "sudo", "su", "chmod 777", "chown"],
      "validation": "strict"
    },
    "network": {
      "allowOutbound": true,
      "allowInbound": false,
      "blockedDomains": ["malicious-site.com"],
      "rateLimiting": {
        "enabled": true,
        "maxRequestsPerMinute": 60,
        "maxRequestsPerHour": 1000
      }
    }
  }
}
```

### Compliance Features
```json
{
  "compliance": {
    "dataProtection": {
      "encryptionAtRest": true,
      "encryptionInTransit": true,
      "dataMinimization": true,
      "rightToErasure": true,
      "consentManagement": true
    },
    "auditLogging": {
      "enabled": true,
      "level": "comprehensive",
      "retention": "2y",
      "encryption": "AES-256",
      "immutable": true
    },
    "accessControl": {
      "authentication": "required",
      "authorization": "role-based",
      "sessionManagement": "secure",
      "passwordPolicy": "strong"
    },
    "monitoring": {
      "realTime": true,
      "alerting": true,
      "anomalyDetection": true,
      "threatIntelligence": true
    }
  }
}
```

## Troubleshooting

### Common Issues

#### Server Startup Problems
**Problem**: MCP server fails to start
**Solution**:
```bash
# Check Node.js version
node --version

# Verify Claude Code installation
claude --version

# Check API key
echo $ANTHROPIC_API_KEY

# Start server with debug logging
DEBUG=* npm start

# Check port availability
netstat -an | grep 3000
```

#### Connection Issues
**Problem**: Claude Desktop cannot connect to MCP server
**Solution**:
```json
{
  "troubleshooting": {
    "network": {
      "checkFirewall": "Ensure port 3000 is open",
      "checkBinding": "Verify server binds to correct interface",
      "checkCORS": "Configure CORS for cross-origin requests"
    },
    "configuration": {
      "validateConfig": "Check MCP configuration syntax",
      "checkPaths": "Verify all file paths are correct",
      "testConnection": "Use curl to test server endpoint"
    }
  }
}
```

#### Performance Issues
**Problem**: Slow response times or high resource usage
**Solution**:
```json
{
  "performance": {
    "caching": {
      "enabled": true,
      "strategy": "LRU",
      "maxSize": "500MB",
      "ttl": 3600
    },
    "concurrency": {
      "maxConcurrentRequests": 5,
      "queueSize": 100,
      "timeoutMs": 30000
    },
    "optimization": {
      "enableCompression": true,
      "enableKeepAlive": true,
      "poolConnections": true
    }
  }
}
```

#### Claude Code Integration Issues
**Problem**: Claude Code commands failing or producing errors
**Solution**:
- Verify Claude Code CLI is properly installed and configured
- Check API key permissions and credit balance
- Ensure workspace paths are accessible
- Review Claude Code logs for detailed error information
- Test Claude Code directly outside of MCP to isolate issues

### Diagnostic Tools
```bash
# Health check endpoint
curl http://localhost:3000/health

# Server status
curl http://localhost:3000/status

# Configuration validation
npm run validate-config

# Performance metrics
curl http://localhost:3000/metrics

# Debug mode
DEBUG=claude-code-mcp:* npm start
```

## Advanced Configuration

### Custom Workflows
```json
{
  "workflows": {
    "fullStackDevelopment": {
      "name": "Full Stack Development",
      "description": "Complete full-stack application development workflow",
      "steps": [
        {
          "name": "requirements-analysis",
          "tool": "claude-code",
          "command": "analyze-requirements",
          "timeout": 60000
        },
        {
          "name": "architecture-design",
          "tool": "claude-code",
          "command": "design-architecture",
          "dependencies": ["requirements-analysis"]
        },
        {
          "name": "backend-development",
          "tool": "claude-code",
          "command": "develop-backend",
          "dependencies": ["architecture-design"]
        },
        {
          "name": "frontend-development",
          "tool": "claude-code",
          "command": "develop-frontend",
          "dependencies": ["backend-development"]
        },
        {
          "name": "testing",
          "tool": "claude-code",
          "command": "generate-tests",
          "dependencies": ["backend-development", "frontend-development"]
        }
      ]
    }
  }
}
```

### Plugin System
```javascript
// Custom plugin example
class CustomClaudeCodePlugin {
  constructor(config) {
    this.config = config;
    this.name = 'custom-plugin';
    this.version = '1.0.0';
  }

  async initialize(server) {
    // Plugin initialization logic
    server.registerTool('custom-analysis', this.customAnalysis.bind(this));
    server.registerResource('custom-templates', this.getTemplates.bind(this));
  }

  async customAnalysis(params) {
    // Custom analysis implementation
    const result = await this.analyzeCode(params.code);
    return {
      success: true,
      analysis: result,
      recommendations: this.generateRecommendations(result)
    };
  }

  async getTemplates() {
    // Return custom templates
    return {
      templates: [
        {
          name: 'react-component',
          description: 'React component template',
          content: this.getReactTemplate()
        }
      ]
    };
  }
}

// Plugin registration
module.exports = CustomClaudeCodePlugin;
```

### Monitoring and Analytics
```json
{
  "monitoring": {
    "metrics": {
      "enabled": true,
      "endpoint": "/metrics",
      "format": "prometheus",
      "interval": 30
    },
    "logging": {
      "level": "info",
      "format": "json",
      "destinations": ["console", "file", "elasticsearch"],
      "rotation": "daily"
    },
    "alerts": {
      "enabled": true,
      "channels": ["email", "slack", "webhook"],
      "rules": [
        {
          "name": "high-error-rate",
          "condition": "error_rate > 0.05",
          "action": "notify"
        },
        {
          "name": "slow-response",
          "condition": "avg_response_time > 30s",
          "action": "scale"
        }
      ]
    },
    "dashboard": {
      "enabled": true,
      "port": 3001,
      "authentication": true
    }
  }
}
```

## API Reference

### Core API Endpoints
```typescript
interface ClaudeCodeMCPAPI {
  // Tool execution
  POST /tools/execute: {
    tool: string;
    parameters: Record<string, any>;
    workspace?: string;
  }

  // Resource access
  GET /resources/{resourceId}: ResourceResponse;
  
  // Server status
  GET /health: HealthResponse;
  GET /status: StatusResponse;
  GET /metrics: MetricsResponse;

  // Configuration
  GET /config: ConfigResponse;
  PUT /config: UpdateConfigRequest;
}

interface ToolExecutionRequest {
  tool: string;
  parameters: {
    command?: string;
    files?: string[];
    options?: Record<string, any>;
  };
  workspace?: string;
  timeout?: number;
}

interface ToolExecutionResponse {
  success: boolean;
  result: any;
  output: string;
  files: ModifiedFile[];
  metrics: ExecutionMetrics;
  errors?: Error[];
}
```

### WebSocket Events
```typescript
interface WebSocketEvents {
  // Client to server
  'tool-execute': ToolExecutionRequest;
  'resource-get': ResourceRequest;
  'subscribe-metrics': MetricsSubscription;

  // Server to client
  'tool-result': ToolExecutionResponse;
  'resource-data': ResourceResponse;
  'metrics-update': MetricsUpdate;
  'error': ErrorResponse;
}
```

## Links

- [GitHub Repository](https://github.com/auchenberg/claude-code-mcp)
- [NPM Package](https://www.npmjs.com/package/@auchenberg/claude-code-mcp)
- [Documentation](https://github.com/auchenberg/claude-code-mcp/blob/main/README.md)
- [Issues](https://github.com/auchenberg/claude-code-mcp/issues)
- [Releases](https://github.com/auchenberg/claude-code-mcp/releases)
- [Claude Code Documentation](https://docs.anthropic.com/en/docs/claude-code)

## Community Resources

- [MCP Community Discord](https://discord.gg/mcp)
- [Claude Code Discord](https://discord.gg/claude-code)
- [Anthropic Developer Forum](https://community.anthropic.com/)
- [MCP Specification](https://spec.modelcontextprotocol.io/)
- [Claude Code Examples](https://github.com/anthropics/claude-code-examples)
- [Best Practices Guide](https://docs.anthropic.com/en/docs/claude-code/best-practices)

