
# `ezyang/codemcp`: A Coding Assistant MCP for Claude Desktop

`ezyang/codemcp` is a significant community-contributed Model Context Protocol (MCP) server designed to transform Claude Desktop into a powerful pair programming assistant. It enables Claude to directly interact with your codebase, implementing features, fixing bugs, and refactoring code by editing files and running tests. This project emphasizes automation, version control, and IDE agnosticism, making it a highly valuable tool for developers.

## Key Features

*   **Zero Marginal Cost**: Designed to be used with Claude Pro ($20/mo subscription), meaning no additional cost for agent actions, as it leverages Claude's existing capabilities.
*   **Auto-Accept by Default**: Aims for minimal human supervision, allowing the agent to proceed as far as possible before requiring human review. This accelerates development workflows.
*   **Restricted Shell**: For security and control, it forbids unrestricted shell access. Commands must be pre-declared in a `codemcp.toml` configuration file.
*   **Git Versioning**: All edits made by the LLM are automatically Git versioned, providing a robust mechanism for fine-grained rollback and tracking changes.
*   **IDE Agnostic**: Works seamlessly with any Integrated Development Environment (IDE) because changes are applied directly to the codebase, rather than relying on specific IDE integrations.
*   **Multi-tool Approach**: The project is evolving towards a multi-tool structure, which aims to improve token efficiency and allow for more complex agentic workflows.

## Installation and Usage

To get started with `ezyang/codemcp`, follow these steps (based on the GitHub README):

1.  **Install Prerequisites**: Ensure you have `uv` (a Python package installer and resolver) and `git` installed on your system.

2.  **Install Claude-MCP Browser Extension**: While potentially being obsoleted by Anthropic's native 'Integrations', you might still need the `claude-mcp` browser extension for initial setup or specific functionalities.

3.  **Run the `codemcp` Server**: Execute the server using `uvx`:
    ```bash
    uvx --from git+https://github.com/ezyang/codemcp@prod codemcp serve
    ```
    You can specify a port with `--port 1234` if needed.

4.  **Configure Claude-MCP Browser Extension**: Point your `claude-mcp` browser extension to the server URL:
    ```
    http://127.0.0.1:8000/sse
    ```

5.  **Create `codemcp.toml`**: In the root of your Git repository checkout, create a `codemcp.toml` file to define the commands Claude is allowed to execute. For example:
    ```toml
    # codemcp.toml
    format = ["./run_format.sh"]
    test = ["./run_test.sh"]
    ```

6.  **Integrate with Claude Desktop**: In Claude Desktop, create a new Project and add the following instruction to the Project Instructions:
    ```
    Initialize codemcp with $PROJECT_DIR
    ```
    Replace `$PROJECT_DIR` with the actual path to your project.

## Configuration Options (`codemcp.toml`)

The `codemcp.toml` file is central to configuring the behavior of the `codemcp` server:

*   **`project_prompt`**: A prompt that is loaded when initializing the project in Claude chats. This can be used to provide initial context or instructions to Claude.
*   **`commands`**: Defines a mapping of command names to shell commands that Claude is permitted to run. Each command can also have an optional `doc` field for instructions.

## Logging

Logs generated by `codemcp` are typically written to `~/.codemcp/codemcp.log`. The log level can be adjusted by configuring the `~/.codemcprc` file.

## Best Practices

*   **Start Small**: Begin with simple tasks and gradually increase complexity as you become familiar with `codemcp`'s behavior.
*   **Version Control**: Always ensure your project is under Git version control, as `codemcp` heavily relies on it for tracking changes.
*   **Review Changes**: Despite the auto-accept feature, regularly review the changes made by Claude to ensure correctness and adherence to your coding standards.
*   **Secure Commands**: Carefully define commands in `codemcp.toml` to prevent unintended actions or security vulnerabilities.

## Source

[https://github.com/ezyang/codemcp](https://github.com/ezyang/codemcp)


